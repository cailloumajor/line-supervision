# Override file for production
version: "3.7"

services:
  influx:
    environment:
      - INFLUXDB_MONITOR_STORE_ENABLED=false

  web:
    build:
      context: ./web
      args:
        # Following build arguments will be obtained from `.env` file
        - INFLUX_DB_NAME
    volumes:
      - caddy_data:/data

  reverse-proxy:
    labels:
      traefik.http.routers.influx-debug-noop.rule: "PathPrefix(`/influx/debug/`)"
      traefik.http.routers.influx-debug-noop.service: "noop@internal"
    ports:
      - "80:8000"

volumes:
  caddy_data:
